<div class="container-fluid clients">
  <div class="header d-flex justify-content-between">
    <h5 class="title">კლიენტების სია</h5>

    <button mat-button class="primary-btn" routerLink="/clients/add">
      <img src="../../../assets/images/icons/plus.svg" alt="" />
      კლიენტის დამატება
    </button>
  </div>
  
  <p-table #dt [value]="clients" dataKey="id" styleClass="p-datatable-clients" [rowHover]="true"
    [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="loading"
    [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [filterDelay]="0"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="id">ID<p-sortIcon field="id"></p-sortIcon></th>
        <th pSortableColumn="name">სახელი <p-sortIcon field="name"></p-sortIcon></th>
        <th pSortableColumn="lastName">გვარი<p-sortIcon field="lastName"></p-sortIcon></th>
        <th pSortableColumn="gender">სქესი<p-sortIcon field="date"></p-sortIcon></th>
        <th pSortableColumn="privateNumber">პ/ნ <p-sortIcon field="privateNumber"></p-sortIcon></th>
        <th pSortableColumn="mobile">მობ. <p-sortIcon field="mobile"></p-sortIcon></th>
        <th pSortableColumn="legalAddressCountry">ქვეყ/იურ<p-sortIcon field="legalAddressCountry"></p-sortIcon></th>
        <th pSortableColumn="legalAddressCity">ქალ/იურ<p-sortIcon field="legalAddressCity"></p-sortIcon></th>
        <th pSortableColumn="legalAddress">მის/იურ<p-sortIcon field="legalAddress"></p-sortIcon></th>
        <th pSortableColumn="physicalAddressCountry">ქვეყ/ფიზ<p-sortIcon field="physicalAddressCountry"></p-sortIcon></th>
        <th pSortableColumn="physicalAddressCity">ქალ/ფიზ<p-sortIcon field="physicalAddressCity"></p-sortIcon></th>
        <th pSortableColumn="physicalAddress">მის/ფიზ<p-sortIcon field="physicalAddress"></p-sortIcon></th>
        <th >დეტალები</th>
      </tr>
      <tr>
        <th>
          <input  
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'id', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'name', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'lastName', 'contains')"           
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <p-dropdown 
            [options]="genders" 
            (onChange)="dt.filter($event.value, 'gender', 'equals')"           
            placeholder="ჩაწერე" 
          >
            <ng-template let-option pTemplate="item">
                <span>{{option.label}}</span>
            </ng-template>
          </p-dropdown>
        </th>
        <th>
          <input 
            pInputText 
            type="number" 
            (input)="dt.filter($event.target.value, 'privateNumber', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="number" 
            (input)="dt.filter($event.target.value, 'mobile', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'legalAddressCountry', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'legalAddressCity', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'legalAddress', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'physicalAddressCountry', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'physicalAddressCity', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th>
          <input 
            pInputText 
            type="text" 
            (input)="dt.filter($event.target.value, 'physicalAddress', 'contains')" 
            placeholder="ჩაწერე" 
            class="p-column-filter"
          >
        </th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-client>
      <tr class="p-selectable-row">
        <td>
          {{client.id}}
        </td>
        <td>
          {{client.name}}
        </td>
        <td>
          {{client.lastName}}
        </td>
        <td>
          {{getGender(client.gender)}}
        </td>
        <td>
          {{client.privateNumber}}
        </td>
        <td>
          {{client.mobile}}
        </td>
        <td>
          {{client.legalAddressCountry}}
        </td>
        <td>
          {{client.legalAddressCity}}
        </td>
        <td>
          {{client.legalAddress}}
        </td>
        <td>
          {{client.physicalAddressCountry}}
        </td>
        <td>
          {{client.physicalAddressCity}}
        </td>
        <td>
          {{client.physicalAddress}}
        </td>
        <td>
          <div class=" d-flex justify-content-between">
            <button
              mat-button
              class="action-btn"
              (click)="onViewClick(client.id)"
              matTooltip="დეტალები"
            >
              <img src="./../../../assets/images/icons/icon-info.svg" alt="" />
            </button>
            <button
              mat-button
              class="action-btn"
              (click)="onEdit(client.id)"
              matTooltip="რედაქტირება"
            >
              <img src="./../../../assets/images/icons/icon-edit.svg" alt="" />
            </button>
            <button
              mat-button
              class="action-btn"
              (click)="onDelete(client.id)"
              matTooltip="წაშლა"
            >
              <img src="./../../../assets/images/icons/icon-trash.svg" alt="" />
            </button>
          </div>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="8">No clients found.</td>
      </tr>
    </ng-template>
  </p-table>
</div>
